<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
  <meta charset="utf-8">
  <meta name="generator" content="quarto-0.9.80">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>ONS minimum RAP standards - Ways of working</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>

  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <script src="site_libs/clipboard/clipboard.min.js"></script>
  <meta name="quarto:offset" content="./">
  <script src="site_libs/quarto-search/autocomplete.umd.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <script id="quarto-search-options" type="application/json">{
    "location": "navbar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "end",
    "type": "overlay",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ONS minimum RAP standards</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./code_standards.html">Code standards</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Documentation.html">Documentation</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./ways_of_working.html" aria-current="page">Ways of working</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project_management.html">Project management</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
<h2 id="toc-title">On this page</h2>
<ul>
<li><a href="#motivation" class="nav-link active" data-scroll-target="#motivation">Motivation</a></li>
<li><a href="#code-modules-should-run-end-to-end-without-manual-intervention" class="nav-link" data-scroll-target="#code-modules-should-run-end-to-end-without-manual-intervention">6. Code modules should run end to end without manual intervention</a>
<ul class="collapse">
<li><a href="#minimise-manual-steps" class="nav-link" data-scroll-target="#minimise-manual-steps">6.1 Minimise manual steps</a></li>
<li><a href="#use-configuration-files" class="nav-link" data-scroll-target="#use-configuration-files">6.2 Use configuration files</a></li>
</ul></li>
<li><a href="#use-git-for-version-control" class="nav-link" data-scroll-target="#use-git-for-version-control">7. Use git for version control</a></li>
<li><a href="#make-sure-your-code-meets-quality-standards" class="nav-link" data-scroll-target="#make-sure-your-code-meets-quality-standards">8. Make sure your code meets quality standards</a>
<ul class="collapse">
<li><a href="#make-sure-your-analysis-meets-quality-standards" class="nav-link" data-scroll-target="#make-sure-your-analysis-meets-quality-standards">8.1 Make sure your analysis meets quality standards</a></li>
<li><a href="#review-all-code-as-you-go" class="nav-link" data-scroll-target="#review-all-code-as-you-go">8.2 Review all code as you go</a></li>
<li><a href="#test-your-code" class="nav-link" data-scroll-target="#test-your-code">8.3 Test your code</a></li>
</ul></li>
<li><a href="#maintain-and-improve-your-code-continuously-applies-to-re-usable-code" class="nav-link" data-scroll-target="#maintain-and-improve-your-code-continuously-applies-to-re-usable-code">9 Maintain and improve your code continuously (applies to re-usable code)</a>
<ul class="collapse">
<li><a href="#make-code-improvements-before-errors-occur" class="nav-link" data-scroll-target="#make-code-improvements-before-errors-occur">9.1 Make code improvements before errors occur</a></li>
<li><a href="#develop-your-code-iteratively" class="nav-link" data-scroll-target="#develop-your-code-iteratively">9.2 Develop your code iteratively</a></li>
<li><a href="#avoid-reinventing-the-wheel-the-wheel-highly-recommended" class="nav-link" data-scroll-target="#avoid-reinventing-the-wheel-the-wheel-highly-recommended">10 avoid reinventing the wheel the wheel (highly recommended)</a></li>
</ul></li>
</ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<header id="title-block-header" class="quarto-title-block default">

<div class="quarto-title"><h1 class="title display-7">Ways of working</h1></div></header>

<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please note, this is a draft and is published for feedback purposes. The contents of these changes may change in future in response to feedback and suggestions.</p>
</div>
</div>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>These ways of working make RAP easier to implement and more productive. While coding standards are important, it’s just as important to manage your analysis code in the right way.</p>
</section>
<section id="code-modules-should-run-end-to-end-without-manual-intervention" class="level2">
<h2 class="anchored" data-anchor-id="code-modules-should-run-end-to-end-without-manual-intervention">6. Code modules should run end to end without manual intervention</h2>
<p>You should not have to make manual changes to the code or modify parameters during execution. Pipeline scripts should run from end to end. This doesn’t mean automating everything. Rather, think about how best to break the workflow down into sensible steps. If you have manual QA checks to perform, you can do those after the pipeline has finished by building the checks into the run and saving run logs and QA outputs.</p>
<section id="minimise-manual-steps" class="level3">
<h3 class="anchored" data-anchor-id="minimise-manual-steps">6.1 Minimise manual steps</h3>
<p>Automation isn’t just about efficiency. Automating simple manual steps reduces the risk of error. While those steps might be easy to carry out, each manual step risks human error. Automate analysis steps that computers can do more reliably than us, such as performing basic checks and saving outputs.</p>
</section>
<section id="use-configuration-files" class="level3">
<h3 class="anchored" data-anchor-id="use-configuration-files">6.2 Use configuration files</h3>
<p>Analysts often write pipelines that need frequent adjustment, sometimes even while running the pipeline. For example, we often see scripts where variables need updating or code must be commented in and out (effectively adding or removing code chunks during execution). This is bad for reproducibility because it is very difficult to see what the code looked like for each pipeline run. It also makes the process hard to document, as the analyst needs to know which parts of it to change and when.</p>
<p>You can use configuration files to handle these changes outside of the code itself [add duck book link]. Configuration files store settings for your pipeline. For example, if you know you might need to manually change the input file name, it makes sense for it to be loaded in from the configuration file, so you don’t have to change every time it appears in your script. The file also acts as documentation, because it allows others to see which settings were used to run the code, without needing to read the entire code base. Other configuration settings might be things like dates, data and output folder locations, geographical areas, and model parameters.</p>
<p>Configuration files are especially useful for re-usable pipelines, like regular publications. However, they are also useful for one-off pieces work. Using a configuration file from the start makes code development easier if your code needs a lot of set up. For example, you might need to frequently change parameters when developing a model, even if the resulting model will be a single-use piece of work.</p>
</section>
</section>
<section id="use-git-for-version-control" class="level2">
<h2 class="anchored" data-anchor-id="use-git-for-version-control">7. Use git for version control</h2>
<p>Using git for version control means you will be able to see what previous versions of the code looked like. That means you can revert to previous iterations of your pipeline, which is very difficult to do manually. If used correctly, it will help you keep an audit trail of who made which contributions, when and why. This also improves efficiency by helping you to collaborate and track changes more effectively.</p>
<p>Avoid archiving code in your repository. Using git means you can delete code that you don’t need as it’s preserved in the version history. Your repository should not contain archive folders or commented out code.</p>
</section>
<section id="make-sure-your-code-meets-quality-standards" class="level2">
<h2 class="anchored" data-anchor-id="make-sure-your-code-meets-quality-standards">8. Make sure your code meets quality standards</h2>
<p>Ultimately, the aim of RAP is to produce high quality statistical outputs. When thinking about the quality of your code you should consider how the ways you are working are helping you achieve this. This also means making sure code quality is proportionate to how complex and risky your pipeline is. Below are essential QA practices for analysis code, although some projects may also require additional forms of quality assurance.</p>
<section id="make-sure-your-analysis-meets-quality-standards" class="level3">
<h3 class="anchored" data-anchor-id="make-sure-your-analysis-meets-quality-standards">8.1 Make sure your analysis meets quality standards</h3>
<p>Analysis carried out using code should meet the same quality standards as any other analysis. That means using the principles and practices set out in the AQuA book [link] and the ONS quality standard for analysis[link].</p>
</section>
<section id="review-all-code-as-you-go" class="level3">
<h3 class="anchored" data-anchor-id="review-all-code-as-you-go">8.2 Review all code as you go</h3>
<p>Aim to review your entire code base at least once. Do this as you develop the code rather than at the end. If possible, code should be reviewed by someone who didn’t write it. Consider the quality of the code as well as whether it’s doing what it’s supposed to. [link to code review templates?]. In other words, use code reviews to make sure your code is readable, reproducible and well documented as well as whether it works.</p>
</section>
<section id="test-your-code" class="level3">
<h3 class="anchored" data-anchor-id="test-your-code">8.3 Test your code</h3>
<p>Test your code to make sure it does what you expected it to. Because code runs without errors and produces outputs that look plausible does not guarantee that it works as intended.</p>
<p>There are many ways to test code. Usually, testing is a lot easier when your code is modular or packaged. Make sure your tests are proportionate to risks and complexity. Ideally, tests should be formalised, whether they are manual or automated. Automating tests makes it much easier to document exactly how you tested your code and makes your tests easier to re-run. Ways to test code include: * Unit tests: automated testing of each function against expected outcomes * Integration tests: tests of how different functions work together * Parallel runs: running a new pipeline and comparing results with those of the existing pipeline * Running the code on different systems to ensure it produces a reliable outcome</p>
<p>Each tests should serve a clear purpose. They are not a tick box exercise. Good tests will help you spot issues with the code before errors happen and speed up code production.</p>
</section>
</section>
<section id="maintain-and-improve-your-code-continuously-applies-to-re-usable-code" class="level2">
<h2 class="anchored" data-anchor-id="maintain-and-improve-your-code-continuously-applies-to-re-usable-code">9 Maintain and improve your code continuously (applies to re-usable code)</h2>
<p>Code that is intended for re-use is never truly “finished”. You should expect to continue to maintain the code for as long as it needs to be used. Things like changes to your input data or the systems you use might require unexpected code changes.</p>
<section id="make-code-improvements-before-errors-occur" class="level3">
<h3 class="anchored" data-anchor-id="make-code-improvements-before-errors-occur">9.1 Make code improvements before errors occur</h3>
<p>Code is much harder to fix once an error has already occurred. Locating the source of the error and fixing the issue is much harder under pressure. Instead, you can focus on reducing risks in the code before they cause any errors. This migth mean making the code easier to change in future, doing more quality assurance and testing, or coding solutions for issues that are likely to arise in future, even if they haven’t happened before. Aim to improve your code even while it is functioning correctly to avoid future mistakes.</p>
</section>
<section id="develop-your-code-iteratively" class="level3">
<h3 class="anchored" data-anchor-id="develop-your-code-iteratively">9.2 Develop your code iteratively</h3>
<p>Don’t expect to develop everything to the highest standard right away. If your team are still learning to implement RAP you might aim for a basic set of code at first and improve on it over time. Be aware, however, that lower quality code will need more work in future compared with code that is well written, modular, documented and tested. Early code might also not fully meet user needs. You may want to initially prioritise the most important functionality and later add additional functionality/</p>
</section>
<section id="avoid-reinventing-the-wheel-the-wheel-highly-recommended" class="level3">
<h3 class="anchored" data-anchor-id="avoid-reinventing-the-wheel-the-wheel-highly-recommended">10 avoid reinventing the wheel the wheel (highly recommended)</h3>
<p>Open source code is a great tool when it comes to building pipeline. There are usually solutions out there for common analysis problems that mean you don’t need to write everything from scratch. When tacking a new problem, it’s worth considering whether a package already exists that can help. We recommend using packages that are well established and actively maintained, which you can find out by visiting their github repositories or equivalents.</p>
<p>There are many resources online that can help you if such a package isn’t available. Forums like Stack Overflow carry solutions to common errors or bugs and users often offer code examples.</p>


</section>
</section>
</main> <!-- /main -->
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->


</body></html>